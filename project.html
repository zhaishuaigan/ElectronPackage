<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electronæ‰“åŒ…å·¥å…·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            min-height: 100vh;
            line-height: 1.6;
        }

       
    </style>
</head>
<body>
    

    <script>
        // æ–‡ä»¶ä¸Šä¼ å¤„ç†
        function setupFileUpload(inputId, uploadId, textId, successText) {
            const input = document.getElementById(inputId);
            const upload = document.getElementById(uploadId);
            const text = document.getElementById(textId);

            input.addEventListener('change', function(e) {
                const files = e.target.files;
                if (files.length > 0) {
                    upload.classList.add('has-file');
                    if (input.webkitdirectory) {
                        const folderName = files[0].webkitRelativePath.split('/')[0];
                        text.textContent = `å·²é€‰æ‹©: ${folderName}`;
                    } else {
                        text.textContent = `å·²é€‰æ‹©: ${files[0].name}`;
                    }
                } else {
                    upload.classList.remove('has-file');
                    text.textContent = successText;
                }
            });

            upload.addEventListener('click', function() {
                input.click();
            });
        }

        // åˆå§‹åŒ–æ–‡ä»¶ä¸Šä¼ 
        setupFileUpload('projectDir', 'projectDirUpload', 'projectDirText', 'ç‚¹å‡»é€‰æ‹©é¡¹ç›®ç›®å½•');
        setupFileUpload('appIcon', 'appIconUpload', 'appIconText', 'é€‰æ‹©å›¾æ ‡æ–‡ä»¶ (.ico, .png, .jpg)');
        setupFileUpload('outputDir', 'outputDirUpload', 'outputDirText', 'é€‰æ‹©è¾“å‡ºç›®å½•');

        // è¡¨å•æäº¤å¤„ç†
        document.getElementById('electronForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const appName = document.getElementById('appName').value.trim();
            const projectDir = document.getElementById('projectDir').files;
            const outputDir = document.getElementById('outputDir').files;
            
            // éªŒè¯å¿…å¡«é¡¹
            if (!appName) {
                showStatus('è¯·è¾“å…¥ç¨‹åºæ–‡ä»¶å', 'error');
                return;
            }
            
            if (projectDir.length === 0) {
                showStatus('è¯·é€‰æ‹©é¡¹ç›®ç›®å½•', 'error');
                return;
            }
            
            if (outputDir.length === 0) {
                showStatus('è¯·é€‰æ‹©è¾“å‡ºç›®å½•', 'error');
                return;
            }

            // å¼€å§‹æ‰“åŒ…
            startPackaging();
        });

        // è¿”å›æŒ‰é’®
        document.getElementById('backBtn').addEventListener('click', function() {
            if (confirm('ç¡®å®šè¦è¿”å›å—ï¼Ÿå½“å‰é…ç½®å°†ä¼šä¸¢å¤±ã€‚')) {
                showStatus('æ­£åœ¨è¿”å›...', 'success');
                setTimeout(() => {
                    window.history.back();
                }, 1000);
            }
        });

        // æ˜¾ç¤ºçŠ¶æ€æ¶ˆæ¯
        function showStatus(message, type) {
            const statusElement = document.getElementById('statusMessage');
            statusElement.textContent = message;
            statusElement.className = `status-message status-${type}`;
            statusElement.style.display = 'block';
            
            if (type === 'success') {
                setTimeout(() => {
                    statusElement.style.display = 'none';
                }, 4000);
            }
        }

        // å¼€å§‹æ‰“åŒ…è¿‡ç¨‹
        function startPackaging() {
            const progressContainer = document.getElementById('progressContainer');
            const progressFill = document.getElementById('progressFill');
            const progressLabel = document.getElementById('progressLabel');
            const generateBtn = document.getElementById('generateBtn');
            
            // æ˜¾ç¤ºè¿›åº¦æ¡
            progressContainer.style.display = 'block';
            generateBtn.disabled = true;
            generateBtn.innerHTML = '<span class="loading"></span>æ‰“åŒ…ä¸­...';
            
            const steps = [
                'æ­£åœ¨åˆ†æé¡¹ç›®ç»“æ„...',
                'æ­£åœ¨å¤åˆ¶é¡¹ç›®æ–‡ä»¶...',
                'æ­£åœ¨å®‰è£…ä¾èµ–...',
                'æ­£åœ¨ç¼–è¯‘åº”ç”¨...',
                'æ­£åœ¨ç”Ÿæˆå®‰è£…åŒ…...',
                'æ­£åœ¨ä¼˜åŒ–æ–‡ä»¶å¤§å°...',
                'æ‰“åŒ…å®Œæˆï¼'
            ];
            
            let currentStep = 0;
            let progress = 0;
            
            const interval = setInterval(() => {
                progress += Math.random() * 12 + 3;
                
                if (progress >= (currentStep + 1) * (100 / steps.length)) {
                    currentStep++;
                    if (currentStep < steps.length) {
                        progressLabel.textContent = steps[currentStep];
                    }
                }
                
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    
                    setTimeout(() => {
                        progressContainer.style.display = 'none';
                        generateBtn.disabled = false;
                        generateBtn.innerHTML = 'å¼€å§‹æ‰“åŒ…';
                        showStatus('ğŸ‰ æ‰“åŒ…æˆåŠŸï¼åº”ç”¨ç¨‹åºå·²ä¿å­˜åˆ°è¾“å‡ºç›®å½•ã€‚', 'success');
                    }, 800);
                }
                
                progressFill.style.width = progress + '%';
            }, 300);
        }
    </script>
</body>
</html>